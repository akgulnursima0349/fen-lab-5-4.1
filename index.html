<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Işık Nasıl Yayılır? - Fen Bilgisi Simülasyonu</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .screen {
            display: none;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            padding: 30px;
            margin: 20px 0;
            min-height: 600px;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .content {
            font-size: 1.1em;
            line-height: 1.6;
            color: #34495e;
            margin-bottom: 30px;
        }

        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .btn-success {
            background: linear-gradient(45deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(45deg, #f39c12, #e67e22);
        }

        .btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .interactive-area {
            background: #f8f9fa;
            border: 2px dashed #bdc3c7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            min-height: 300px;
            position: relative;
        }

        .light-source {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #f1c40f, #f39c12);
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(241, 196, 15, 0.6);
            transition: all 0.3s ease;
        }

        .light-source:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(241, 196, 15, 0.8);
        }

        .light-beam {
            position: absolute;
            background: linear-gradient(90deg, rgba(255,255,255,0.8), rgba(255,255,255,0.2));
            height: 4px;
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
            transform-origin: left center;
        }

        .card {
            width: 100px;
            height: 80px;
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            position: absolute;
            cursor: move;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card.hole {
            background: radial-gradient(circle, #34495e 0%, #34495e 15%, #ecf0f1 15%);
        }

        .target-screen {
            width: 120px;
            height: 100px;
            background: #2c3e50;
            border-radius: 8px;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .target-screen.lit {
            background: radial-gradient(circle, #f1c40f, #f39c12);
            color: #2c3e50;
        }

        .drag-zone {
            border: 3px dashed #3498db;
            border-radius: 10px;
            padding: 20px;
            margin: 10px;
            min-height: 100px;
            text-align: center;
            background: rgba(52, 152, 219, 0.1);
        }

        .draggable {
            display: inline-block;
            margin: 10px;
            cursor: move;
            transition: all 0.3s ease;
        }

        .draggable:hover {
            transform: scale(1.05);
        }

        .draggable img {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .quiz-question {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .quiz-option {
            background: white;
            border: 2px solid #bdc3c7;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: #3498db;
            background: #f8f9fa;
        }

        .quiz-option.selected {
            border-color: #27ae60;
            background: #d5f4e6;
        }

        .quiz-option.correct {
            border-color: #27ae60;
            background: #d5f4e6;
        }

        .quiz-option.incorrect {
            border-color: #e74c3c;
            background: #fadbd8;
        }

        .feedback {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
        }

        .feedback.correct {
            background: #d5f4e6;
            color: #27ae60;
            border: 2px solid #27ae60;
        }

        .feedback.incorrect {
            background: #fadbd8;
            color: #e74c3c;
            border: 2px solid #e74c3c;
        }

        .canvas-container {
            border: 2px solid #bdc3c7;
            border-radius: 10px;
            margin: 20px 0;
            background: white;
        }

        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .slider {
            width: 200px;
            height: 6px;
            border-radius: 3px;
            background: #bdc3c7;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            border: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2980b9);
            width: 0%;
            transition: width 0.3s ease;
        }

        .badge {
            display: inline-block;
            padding: 8px 16px;
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin: 5px;
        }

        .badge.gold {
            background: linear-gradient(45deg, #f1c40f, #f39c12);
        }

        .badge.silver {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .table th, .table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        .table th {
            background: #34495e;
            color: white;
            font-weight: bold;
        }

        .table tr:hover {
            background: #f8f9fa;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 0;
        }

        .nav-btn {
            padding: 12px 25px;
            font-size: 1em;
        }

        .screen-counter {
            background: #34495e;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .title {
                font-size: 2em;
            }
            
            .quiz-options {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- E0: Karşılama & Hedefler -->
        <div class="screen active" id="screen-0">
            <div class="header">
                <h1 class="title">Işık Nasıl Yayılır?</h1>
                <p class="subtitle">Fen Bilgisi Etkileşimli Simülasyonu</p>
            </div>
            
            <div class="content">
                <p>Bu etkinlikte, bir ışık kaynağından çıkan ışığın her yönde ve doğrusal bir yol izlediğini gözlemleyecek, bulgularınızı çizim ve tablo ile kaydedeceksiniz.</p>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
                <button class="btn btn-success" onclick="startSimulation()">Başla</button>
                <button class="btn btn-warning" onclick="showSafety()">Laboratuvar Güvenliği</button>
            </div>
        </div>

        <!-- E1: Işık Kaynaklarını Tanıyalım -->
        <div class="screen" id="screen-1">
            <div class="header">
                <h2>Işık Kaynaklarını Tanıyalım</h2>
            </div>
            
            <div class="content">
                <p>Işık kaynağı kendi ışığını üreten varlık/araçtır. Güneş doğal; ampul ve el feneri yapay ışık kaynağıdır.</p>
            </div>
            
            <div class="interactive-area">
                <div class="drag-zone" id="natural-zone">
                    <h3>Doğal Işık Kaynakları</h3>
                    <div id="natural-items"></div>
                </div>
                
                <div class="drag-zone" id="artificial-zone">
                    <h3>Yapay Işık Kaynakları</h3>
                    <div id="artificial-items"></div>
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <div class="draggable" draggable="true" data-type="natural">
                        <div style="width: 80px; height: 80px; background: radial-gradient(circle, #f1c40f, #f39c12); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em;">☀️</div>
                        <p>Güneş</p>
                    </div>
                    
                    <div class="draggable" draggable="true" data-type="artificial">
                        <div style="width: 80px; height: 80px; background: #34495e; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2em;">💡</div>
                        <p>Ampul</p>
                    </div>
                    
                    <div class="draggable" draggable="true" data-type="artificial">
                        <div style="width: 80px; height: 80px; background: #e74c3c; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2em;">🔦</div>
                        <p>El Feneri</p>
                    </div>
                </div>
            </div>
            
            <div id="feedback-1" class="feedback" style="display: none;"></div>
            
            <div class="navigation">
                <button class="btn nav-btn" onclick="previousScreen()">Geri</button>
                <span class="screen-counter">1/10</span>
                <button class="btn nav-btn" onclick="nextScreen()">İleri</button>
            </div>
        </div>

        <!-- E2: Işık Demeti -->
        <div class="screen" id="screen-2">
            <div class="header">
                <h2>Işık Demeti Nedir?</h2>
            </div>
            
            <div class="content">
                <p>Işık, bir kaynaktan çıktığında uzaya ışık ışınları (ışık demeti) gönderir. Şimdi feneri açıp demeti gözlemleyin.</p>
            </div>
            
            <div class="interactive-area" style="height: 400px; background: #2c3e50;">
                <div class="light-source" id="flashlight" style="left: 50px; top: 200px;"></div>
                <div id="light-beams"></div>
                <div id="fog-effect" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.1); pointer-events: none;"></div>
            </div>
            
            <div class="controls">
                <button class="btn" id="flashlight-toggle" onclick="toggleFlashlight()">Fener: KAPALI</button>
                <button class="btn" id="fog-toggle" onclick="toggleFog()">Sis Efekti: KAPALI</button>
            </div>
            
            <div class="navigation">
                <button class="btn nav-btn" onclick="previousScreen()">Geri</button>
                <span class="screen-counter">2/10</span>
                <button class="btn nav-btn" onclick="nextScreen()">İleri</button>
            </div>
        </div>

        <!-- E3: Delikli Kart Deneyi -->
        <div class="screen" id="screen-3">
            <div class="header">
                <h2>Doğrusal Yayılma: Delikli Kart Deneyi</h2>
            </div>
            
            <div class="content">
                <p>Delikler aynı doğru üzerinde hizalıysa ışık demeti kartların tümünden geçer. Birini kaydırırsanız ışık engellenir. Bu, ışığın doğrusal yayıldığını gösterir.</p>
            </div>
            
            <div class="interactive-area" style="height: 400px; background: #34495e;">
                <div class="light-source" style="left: 50px; top: 200px; background: radial-gradient(circle, #f1c40f, #f39c12);"></div>
                <div class="card hole" id="card1" style="left: 200px; top: 180px;">Kart 1</div>
                <div class="card hole" id="card2" style="left: 350px; top: 180px;">Kart 2</div>
                <div class="card hole" id="card3" style="left: 500px; top: 180px;">Kart 3</div>
                <div class="target-screen" id="target" style="right: 50px; top: 200px;">Perde</div>
                <div id="light-path"></div>
            </div>
            
            <div class="controls">
                <button class="btn" onclick="alignCards()">Hizala</button>
                <button class="btn" onclick="checkAlignment()">Kontrol Et</button>
            </div>
            
            <div id="alignment-feedback" class="feedback" style="display: none;"></div>
            
            <div class="quiz-question" id="quiz-3" style="display: none;">
                <h3>Soru: Işığın kartlardan geçebilmesi için delikler nasıl olmalıdır?</h3>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="selectAnswer(this, 'A')">A) Rastgele yerlerde</div>
                    <div class="quiz-option" onclick="selectAnswer(this, 'B')">B) Aynı doğrultuda hizalı</div>
                    <div class="quiz-option" onclick="selectAnswer(this, 'C')">C) Farklı büyüklükte</div>
                    <div class="quiz-option" onclick="selectAnswer(this, 'D')">D) Kartlar kapalı</div>
                </div>
            </div>
            
            <div class="navigation">
                <button class="btn nav-btn" onclick="previousScreen()">Geri</button>
                <span class="screen-counter">3/10</span>
                <button class="btn nav-btn" onclick="nextScreen()">İleri</button>
            </div>
        </div>

        <!-- E4: Kırık Pipet Analojisi -->
        <div class="screen" id="screen-4">
            <div class="header">
                <h2>Kırık Pipet Analojisi</h2>
            </div>
            
            <div class="content">
                <p>Işık kırık/köşeli bir kanal izleyemez; düz yol ister. Düz pipetten geçiş olur; 'kırık' pipette ışık perdeye ulaşamaz.</p>
            </div>
            
            <div class="interactive-area" style="height: 400px; background: #34495e;">
                <div class="light-source" style="left: 50px; top: 200px;"></div>
                <div class="target-screen" id="target-4" style="right: 50px; top: 200px;">Perde</div>
                <div id="pipe-container" style="position: absolute; left: 150px; top: 150px; width: 400px; height: 100px;"></div>
            </div>
            
            <div class="controls">
                <button class="btn" onclick="selectPipe('straight')">Düz Pipet</button>
                <button class="btn" onclick="selectPipe('bent')">Kırık Pipet</button>
            </div>
            
            <div id="pipe-feedback" class="feedback" style="display: none;"></div>
            
            <div class="quiz-question" id="quiz-4" style="display: none;">
                <h3>Soru: Işık, tek bir ortamda yol alırken kırık yolları izleyebilir.</h3>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="selectTrueFalse(this, false)">Doğru</div>
                    <div class="quiz-option" onclick="selectTrueFalse(this, true)">Yanlış</div>
                </div>
            </div>
            
            <div class="navigation">
                <button class="btn nav-btn" onclick="previousScreen()">Geri</button>
                <span class="screen-counter">4/10</span>
                <button class="btn nav-btn" onclick="nextScreen()">İleri</button>
            </div>
        </div>

        <!-- E5: Her Yönde Yayılma -->
        <div class="screen" id="screen-5">
            <div class="header">
                <h2>Her Yönde Yayılma Gözlemi</h2>
            </div>
            
            <div class="content">
                <p>Bir ışık kaynağı, çevresine her yöne ışık gönderir. Bu yüzden, kaynağa eşit uzaklıktaki her nokta ışık alır.</p>
            </div>
            
            <div class="interactive-area" style="height: 400px; background: #2c3e50; position: relative;">
                <div class="light-source" id="central-light" style="left: 200px; top: 200px; width: 40px; height: 40px;"></div>
                <div id="light-rays"></div>
                <div id="target-points"></div>
                <div id="obstacle" style="display: none; position: absolute; width: 60px; height: 60px; background: #e74c3c; border-radius: 5px; left: 300px; top: 150px;"></div>
            </div>
            
            <div class="controls">
                <label>Lamba Gücü: <span id="power-value">50</span>%</label>
                <input type="range" class="slider" id="power-slider" min="0" max="100" value="50" oninput="updatePower(this.value)">
                <button class="btn" onclick="toggleRays()">Işınları Göster/Gizle</button>
                <button class="btn" onclick="toggleObstacle()">Engel Ekle/Kaldır</button>
            </div>
            
            <div class="quiz-question" id="quiz-5" style="display: none;">
                <h3>Soru: A, B, C noktalarının hangileri ışık alır?</h3>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="selectPoints(this, 'all')">A, B ve C</div>
                    <div class="quiz-option" onclick="selectPoints(this, 'ab')">Sadece A ve B</div>
                    <div class="quiz-option" onclick="selectPoints(this, 'bc')">Sadece B ve C</div>
                    <div class="quiz-option" onclick="selectPoints(this, 'none')">Hiçbiri</div>
                </div>
            </div>
            
            <div class="navigation">
                <button class="btn nav-btn" onclick="previousScreen()">Geri</button>
                <span class="screen-counter">5/10</span>
                <button class="btn nav-btn" onclick="nextScreen()">İleri</button>
            </div>
        </div>

        <!-- E6: Gözlem Kayıtları -->
        <div class="screen" id="screen-6">
            <div class="header">
                <h2>Gözlem Kayıtları</h2>
            </div>
            
            <div class="content">
                <p>Gözlemlerinizi kaydedin. Aşağıda iki araç var: Işın Çizimi ve Veri Tablosu.</p>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                <div>
                    <h3>Işın Çizimi</h3>
                    <div class="canvas-container">
                        <canvas id="drawing-canvas" width="400" height="300" style="border: 1px solid #bdc3c7; cursor: crosshair;"></canvas>
                    </div>
                    <div class="controls">
                        <button class="btn" onclick="clearCanvas()">Temizle</button>
                        <button class="btn" onclick="saveDrawing()">Çizimi Kaydet</button>
                    </div>
                </div>
                
                <div>
                    <h3>Veri Tablosu</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Düzenek</th>
                                <th>Gözlem</th>
                                <th>Sonuç (Doğrusal mı?)</th>
                            </tr>
                        </thead>
                        <tbody id="data-table">
                            <tr>
                                <td>Delikli kartlar hizalı</td>
                                <td>Perde aydınlık</td>
                                <td>
                                    <select onchange="updateResult(this, 0)">
                                        <option value="">Seçiniz</option>
                                        <option value="Evet">Evet</option>
                                        <option value="Hayır">Hayır</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>Kırık pipet</td>
                                <td>Perde karanlık</td>
                                <td>
                                    <select onchange="updateResult(this, 1)">
                                        <option value="">Seçiniz</option>
                                        <option value="Evet">Evet</option>
                                        <option value="Hayır">Hayır</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>Her yönde yayılma</td>
                                <td>A,B,C'ye ışık ulaştı</td>
                                <td>
                                    <select onchange="updateResult(this, 2)">
                                        <option value="">Seçiniz</option>
                                        <option value="Evet">Evet</option>
                                        <option value="Hayır">Hayır</option>
                                    </select>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="controls">
                        <button class="btn" onclick="exportPDF()">PDF Dışa Aktar</button>
                    </div>
                </div>
            </div>
            
            <div class="navigation">
                <button class="btn nav-btn" onclick="previousScreen()">Geri</button>
                <span class="screen-counter">6/10</span>
                <button class="btn nav-btn" onclick="nextScreen()">İleri</button>
            </div>
        </div>

        <!-- E7: Usta-Çırak Çizim Oyunu -->
        <div class="screen" id="screen-7">
            <div class="header">
                <h2>Usta-Çırak: Işını Çiz</h2>
            </div>
            
            <div class="content">
                <p>Perdeyi aydınlatmak için tek bir düz çizgi ile kaynaktan perdeye ışın çiz. Engel varsa ışın ulaşmayabilir.</p>
            </div>
            
            <div class="interactive-area" style="height: 400px; background: #2c3e50; position: relative;">
                <div class="light-source" id="game-source" style="left: 50px; top: 200px;"></div>
                <div class="target-screen" id="game-target" style="right: 50px; top: 200px;">Perde</div>
                <div id="game-obstacle" style="display: none; position: absolute; width: 80px; height: 80px; background: #e74c3c; border-radius: 5px; left: 300px; top: 160px;"></div>
                <div id="game-beam" style="position: absolute; height: 4px; background: linear-gradient(90deg, rgba(255,255,255,0.8), rgba(255,255,255,0.2)); border-radius: 2px; box-shadow: 0 0 10px rgba(255,255,255,0.5);"></div>
            </div>
            
            <div class="controls">
                <button class="btn" onclick="startGame()">Oyunu Başlat</button>
                <button class="btn" onclick="checkGame()">Kontrol Et</button>
                <button class="btn" onclick="nextLevel()">Sonraki Seviye</button>
            </div>
            
            <div id="game-feedback" class="feedback" style="display: none;"></div>
            <div id="game-level" style="text-align: center; margin: 20px 0; font-size: 1.2em; font-weight: bold;"></div>
            
            <div class="navigation">
                <button class="btn nav-btn" onclick="previousScreen()">Geri</button>
                <span class="screen-counter">7/10</span>
                <button class="btn nav-btn" onclick="nextScreen()">İleri</button>
            </div>
        </div>

        <!-- E8: Bilim Tarihi -->
        <div class="screen" id="screen-8">
            <div class="header">
                <h2>Bilim Tarihi Anı: İbnülheysem ve Karanlık Kutu</h2>
            </div>
            
            <div class="content">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; align-items: center;">
                    <div>
                        <p><strong>İbnülheysem (Alhazen)</strong>, 'karanlık oda (kutu)' düzenekleriyle ışığın doğrusal yayıldığını gösteren çalışmalarıyla optik biliminin öncülerindendir.</p>
                        <p>Simülasyonlardaki 'delikli kart' fikriyle benzer şekilde, küçük bir delikten geçen düz ışınlar, karşıda görüntü oluşturur.</p>
                    </div>
                    <div style="background: #2c3e50; padding: 20px; border-radius: 10px; color: white;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div style="width: 200px; height: 150px; background: #34495e; border: 2px solid #7f8c8d; border-radius: 8px; margin: 0 auto; position: relative;">
                                <div style="position: absolute; left: 10px; top: 50%; width: 4px; height: 4px; background: #f1c40f; border-radius: 50%;"></div>
                                <div style="position: absolute; right: 20px; top: 20px; width: 60px; height: 40px; background: #f1c40f; border-radius: 4px;"></div>
                                <div style="position: absolute; left: 20px; top: 20px; right: 20px; bottom: 20px; border: 1px dashed #7f8c8d;"></div>
                            </div>
                        </div>
                        <p style="text-align: center; font-size: 0.9em;">Karanlık Kutu (Camera Obscura) Şeması</p>
                    </div>
                </div>
            </div>
            
            <div class="navigation">
                <button class="btn nav-btn" onclick="previousScreen()">Geri</button>
                <span class="screen-counter">8/10</span>
                <button class="btn nav-btn" onclick="nextScreen()">Devam Et</button>
            </div>
        </div>

        <!-- E9: Son Test & Rapor -->
        <div class="screen" id="screen-9">
            <div class="header">
                <h2>Son Test & Rapor</h2>
            </div>
            
            <div class="content">
                <p>Artık öğrendiklerinizi test etme zamanı! Aşağıdaki soruları yanıtlayın.</p>
            </div>
            
            <div id="final-test">
                <div class="quiz-question">
                    <h3>Soru 1: Işık kaynağı nedir?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'A', 0)">A) Başka yerden gelen ışığı yansıtan cisim</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'B', 0)">B) Kendi ışığını üreten varlık/araç</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'C', 0)">C) Sadece gündüz görülen cisim</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'D', 0)">D) Elektrik akımı</div>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h3>Soru 2: Delikler aynı doğru üzerinde hizalanırsa ne olur?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'A', 1)">A) Işık tüm deliklerden geçer, perde aydınlanır</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'B', 1)">B) Işık her zaman geçer</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'C', 1)">C) Işık yön değiştirir, kıvrılır</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'D', 1)">D) Perde karanlık kalır</div>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h3>Soru 3: Işık tek bir ortamda ilerlerken nasıl bir yol izler?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'A', 2)">A) Eğri</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'B', 2)">B) Düz (doğrusal)</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'C', 2)">C) Zikzak</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'D', 2)">D) Dairesel</div>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h3>Soru 4: Kaynak çevresine ışık gönderir. A, B, C noktaları eşit uzaklıkta ve engel yoksa hangileri ışık alır?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'A', 3)">A) A, B ve C</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'B', 3)">B) Sadece A</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'C', 3)">C) Sadece B ve C</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'D', 3)">D) Hiçbiri</div>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h3>Soru 5: Engel, kaynak ile nokta arasına girerse...</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'A', 4)">A) Engel yönünde ışık ulaşmaz</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'B', 4)">B) Işık engeli döner</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'C', 4)">C) Işık kıvrılır</div>
                        <div class="quiz-option" onclick="selectFinalAnswer(this, 'D', 4)">D) Işık çoğalır</div>
                    </div>
                </div>
            </div>
            
            <div id="test-results" style="display: none; text-align: center; margin: 30px 0;">
                <h3>Test Sonuçları</h3>
                <div id="score-display" style="font-size: 1.5em; margin: 20px 0;"></div>
                <div id="badges-display"></div>
                <button class="btn btn-success" onclick="generateReport()">Raporu İndir (PDF)</button>
            </div>
            
            <div class="navigation">
                <button class="btn nav-btn" onclick="previousScreen()">Geri</button>
                <span class="screen-counter">9/10</span>
                <button class="btn nav-btn" onclick="finishTest()">Testi Bitir</button>
            </div>
        </div>

        <!-- Sonuç Ekranı -->
        <div class="screen" id="screen-10">
            <div class="header">
                <h1 class="title">Tebrikler!</h1>
                <p class="subtitle">Işığın Her Yönde Doğrusal Yayıldığını Kanıtladınız</p>
            </div>
            
            <div class="content" style="text-align: center;">
                <div id="final-results"></div>
                <div style="margin: 30px 0;">
                    <button class="btn btn-success" onclick="restartSimulation()">Yeniden Başla</button>
                    <button class="btn btn-warning" onclick="generateReport()">Raporu İndir</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Güvenlik Modal -->
    <div id="safety-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSafety()">&times;</span>
            <h2>Laboratuvar Güvenliği</h2>
            <div class="content">
                <p><strong>Gerçek deneylerde dikkat edilmesi gerekenler:</strong></p>
                <ul style="margin: 20px 0; padding-left: 20px;">
                    <li>Işık kaynaklarına doğrudan bakmayın</li>
                    <li>Lazer kullanmayın</li>
                    <li>Öğretmen yönergelerini izleyin</li>
                    <li>Güvenlik gözlüğü takın</li>
                    <li>Deney sonrası ellerinizi yıkayın</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Global değişkenler
        let currentScreen = 0;
        let totalScreens = 10;
        let gameLevel = 1;
        let gameScore = 0;
        let testAnswers = [];
        let finalScore = 0;
        let isDrawing = false;
        let canvas, ctx;
        let flashlightOn = false;
        let fogOn = false;
        let powerLevel = 50;
        let showRays = true;
        let obstaclePresent = false;

        // Simülasyon başlatma
        function startSimulation() {
            showScreen(1);
        }

        // Ekran gösterme
        function showScreen(screenNumber) {
            // Tüm ekranları gizle
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Seçilen ekranı göster
            document.getElementById(`screen-${screenNumber}`).classList.add('active');
            currentScreen = screenNumber;
            
            // İlerleme çubuğunu güncelle
            updateProgress();
            
            // Ekran özel işlemler
            if (screenNumber === 2) {
                initFlashlight();
            } else if (screenNumber === 3) {
                initCards();
            } else if (screenNumber === 4) {
                initPipes();
            } else if (screenNumber === 5) {
                initRays();
            } else if (screenNumber === 6) {
                initCanvas();
            } else if (screenNumber === 7) {
                initGame();
            }
        }

        // İlerleme çubuğu
        function updateProgress() {
            const progress = (currentScreen / totalScreens) * 100;
            // İlerleme çubuğu varsa güncelle
            const progressBar = document.querySelector('.progress-fill');
            if (progressBar) {
                progressBar.style.width = progress + '%';
            }
        }

        // Önceki ekran
        function previousScreen() {
            if (currentScreen > 0) {
                showScreen(currentScreen - 1);
            }
        }

        // Sonraki ekran
        function nextScreen() {
            if (currentScreen < totalScreens) {
                showScreen(currentScreen + 1);
            }
        }

        // Güvenlik modal
        function showSafety() {
            document.getElementById('safety-modal').style.display = 'block';
        }

        function closeSafety() {
            document.getElementById('safety-modal').style.display = 'none';
        }

        // E1: Işık kaynakları sürükle-bırak
        function initDragDrop() {
            const draggables = document.querySelectorAll('.draggable');
            const zones = document.querySelectorAll('.drag-zone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', draggable.dataset.type);
                });
            });

            zones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const type = e.dataTransfer.getData('text/plain');
                    const zoneType = zone.id.includes('natural') ? 'natural' : 'artificial';
                    
                    if (type === zoneType) {
                        // Doğru yerleştirme
                        showFeedback('correct', 'Harika! Işık kaynaklarını ayırt ettiniz.');
                    } else {
                        // Yanlış yerleştirme
                        showFeedback('incorrect', 'İpucu: Güneş kendi ışığını üretir; ampul/elfeneri elektrikle ışık üretir.');
                    }
                });
            });
        }

        // E2: El feneri
        function initFlashlight() {
            // El feneri animasyonu
        }

        function toggleFlashlight() {
            flashlightOn = !flashlightOn;
            const button = document.getElementById('flashlight-toggle');
            const flashlight = document.getElementById('flashlight');
            const beams = document.getElementById('light-beams');
            
            if (flashlightOn) {
                button.textContent = 'Fener: AÇIK';
                flashlight.style.boxShadow = '0 0 30px rgba(241, 196, 15, 0.8)';
                createLightBeam();
            } else {
                button.textContent = 'Fener: KAPALI';
                flashlight.style.boxShadow = '0 0 20px rgba(241, 196, 15, 0.6)';
                beams.innerHTML = '';
            }
        }

        function toggleFog() {
            fogOn = !fogOn;
            const button = document.getElementById('fog-toggle');
            const fog = document.getElementById('fog-effect');
            
            if (fogOn) {
                button.textContent = 'Sis Efekti: AÇIK';
                fog.style.display = 'block';
            } else {
                button.textContent = 'Sis Efekti: KAPALI';
                fog.style.display = 'none';
            }
        }

        function createLightBeam() {
            const beams = document.getElementById('light-beams');
            beams.innerHTML = '';
            
            // Işık demeti oluştur
            const beam = document.createElement('div');
            beam.className = 'light-beam';
            beam.style.left = '110px';
            beam.style.top = '220px';
            beam.style.width = '300px';
            beam.style.transform = 'rotate(0deg)';
            beams.appendChild(beam);
        }

        // E3: Delikli kartlar
        function initCards() {
            // Kartları sürüklenebilir yap
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.addEventListener('mousedown', startDrag);
            });
        }

        function startDrag(e) {
            const card = e.target;
            let isDragging = true;
            
            function onMouseMove(e) {
                if (isDragging) {
                    card.style.left = e.clientX - 50 + 'px';
                    card.style.top = e.clientY - 40 + 'px';
                }
            }
            
            function onMouseUp() {
                isDragging = false;
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);
                checkAlignment();
            }
            
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
        }

        function alignCards() {
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                card.style.left = (200 + index * 150) + 'px';
                card.style.top = '180px';
            });
            checkAlignment();
        }

        function checkAlignment() {
            const cards = document.querySelectorAll('.card');
            const target = document.getElementById('target');
            const feedback = document.getElementById('alignment-feedback');
            
            // Basit hizalama kontrolü
            let aligned = true;
            cards.forEach(card => {
                const rect = card.getBoundingClientRect();
                if (rect.top < 170 || rect.top > 190) {
                    aligned = false;
                }
            });
            
            if (aligned) {
                target.classList.add('lit');
                showFeedback('correct', 'Geçiş var → Ekranda hedef perdede aydınlık nokta oluştu.');
                setTimeout(() => {
                    document.getElementById('quiz-3').style.display = 'block';
                }, 1000);
            } else {
                target.classList.remove('lit');
                showFeedback('incorrect', 'Geçiş yok → Perde karanlık kaldı.');
            }
        }

        // E4: Pipet analojisi
        function initPipes() {
            // Pipet görselleştirmesi
        }

        function selectPipe(type) {
            const container = document.getElementById('pipe-container');
            const target = document.getElementById('target-4');
            const feedback = document.getElementById('pipe-feedback');
            
            container.innerHTML = '';
            
            if (type === 'straight') {
                // Düz pipet
                const pipe = document.createElement('div');
                pipe.style.cssText = 'width: 300px; height: 20px; background: #7f8c8d; border-radius: 10px; position: absolute; left: 50px; top: 40px;';
                container.appendChild(pipe);
                target.classList.add('lit');
                showFeedback('correct', 'Düz pipetten geçiş var → Perde aydınlandı.');
            } else {
                // Kırık pipet
                const pipe1 = document.createElement('div');
                pipe1.style.cssText = 'width: 150px; height: 20px; background: #7f8c8d; border-radius: 10px; position: absolute; left: 50px; top: 40px;';
                const pipe2 = document.createElement('div');
                pipe2.style.cssText = 'width: 20px; height: 100px; background: #7f8c8d; border-radius: 10px; position: absolute; left: 200px; top: 40px;';
                container.appendChild(pipe1);
                container.appendChild(pipe2);
                target.classList.remove('lit');
                showFeedback('incorrect', 'Kırık pipette geçiş yok → Perde karanlık kaldı.');
            }
            
            setTimeout(() => {
                document.getElementById('quiz-4').style.display = 'block';
            }, 1000);
        }

        // E5: Her yönde yayılma
        function initRays() {
            updateRays();
        }

        function updatePower(value) {
            powerLevel = value;
            document.getElementById('power-value').textContent = value;
            updateRays();
        }

        function updateRays() {
            const raysContainer = document.getElementById('light-rays');
            raysContainer.innerHTML = '';
            
            if (!showRays) return;
            
            const numRays = 8;
            const baseLength = 100 + (powerLevel / 100) * 50;
            
            for (let i = 0; i < numRays; i++) {
                const angle = (i / numRays) * 360;
                const ray = document.createElement('div');
                ray.style.cssText = `
                    position: absolute;
                    width: ${baseLength}px;
                    height: 3px;
                    background: linear-gradient(90deg, rgba(255,255,255,0.8), rgba(255,255,255,0.2));
                    left: 220px;
                    top: 220px;
                    transform-origin: left center;
                    transform: rotate(${angle}deg);
                    box-shadow: 0 0 5px rgba(255,255,255,0.5);
                `;
                raysContainer.appendChild(ray);
            }
        }

        function toggleRays() {
            showRays = !showRays;
            updateRays();
        }

        function toggleObstacle() {
            obstaclePresent = !obstaclePresent;
            const obstacle = document.getElementById('obstacle');
            obstacle.style.display = obstaclePresent ? 'block' : 'none';
            updateRays();
        }

        // E6: Çizim aracı
        function initCanvas() {
            canvas = document.getElementById('drawing-canvas');
            ctx = canvas.getContext('2d');
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            
            // Kaynak noktası çiz
            ctx.fillStyle = '#f1c40f';
            ctx.beginPath();
            ctx.arc(50, 150, 10, 0, 2 * Math.PI);
            ctx.fill();
        }

        function startDrawing(e) {
            isDrawing = true;
            ctx.beginPath();
            ctx.moveTo(e.offsetX, e.offsetY);
        }

        function draw(e) {
            if (!isDrawing) return;
            
            ctx.lineWidth = 3;
            ctx.strokeStyle = '#f1c40f';
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // Kaynak noktasını yeniden çiz
            ctx.fillStyle = '#f1c40f';
            ctx.beginPath();
            ctx.arc(50, 150, 10, 0, 2 * Math.PI);
            ctx.fill();
        }

        function saveDrawing() {
            const link = document.createElement('a');
            link.download = 'isik-cizimi.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        function updateResult(select, index) {
            // Tablo güncelleme
        }

        function exportPDF() {
            alert('PDF raporu oluşturuluyor...');
            // PDF oluşturma işlemi
        }

        // E7: Oyun
        function initGame() {
            document.getElementById('game-level').textContent = `Seviye ${gameLevel}`;
        }

        function startGame() {
            const obstacle = document.getElementById('game-obstacle');
            if (gameLevel === 1) {
                obstacle.style.display = 'none';
            } else if (gameLevel === 2) {
                obstacle.style.display = 'block';
                obstacle.style.left = '300px';
                obstacle.style.top = '160px';
            } else if (gameLevel === 3) {
                obstacle.style.display = 'block';
                obstacle.style.left = '200px';
                obstacle.style.top = '200px';
            }
        }

        function checkGame() {
            const beam = document.getElementById('game-beam');
            const target = document.getElementById('game-target');
            const feedback = document.getElementById('game-feedback');
            
            // Basit kontrol
            if (gameLevel === 1 || gameLevel === 2) {
                target.classList.add('lit');
                showFeedback('correct', 'Doğru! Işın perdeye ulaştı.');
                gameScore++;
            } else {
                target.classList.remove('lit');
                showFeedback('incorrect', 'Engel nedeniyle ışın ulaşamadı.');
            }
        }

        function nextLevel() {
            if (gameLevel < 3) {
                gameLevel++;
                document.getElementById('game-level').textContent = `Seviye ${gameLevel}`;
                startGame();
            } else {
                // Oyun bitti
                const feedback = document.getElementById('game-feedback');
                if (gameScore >= 2) {
                    showFeedback('correct', 'Tebrikler! Doğrusal Yayılma: Usta rozeti kazandınız!');
                } else {
                    showFeedback('incorrect', 'Doğrusal Yayılma: Temel rozeti kazandınız.');
                }
            }
        }

        // Quiz fonksiyonları
        function selectAnswer(element, answer) {
            // Seçenekleri temizle
            element.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Seçili olanı işaretle
            element.classList.add('selected');
            
            // Doğru yanıt kontrolü
            const correctAnswer = 'B';
            if (answer === correctAnswer) {
                element.classList.add('correct');
                showFeedback('correct', 'Evet! Doğrusal yayılma için hizalama şart.');
            } else {
                element.classList.add('incorrect');
                showFeedback('incorrect', 'Tekrar bakın: Delikleri aynı çizgi üzerinde tuttuğunuzda perde aydınlanmıştı.');
            }
        }

        function selectTrueFalse(element, isCorrect) {
            element.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            element.classList.add('selected');
            
            if (isCorrect) {
                element.classList.add('correct');
                showFeedback('correct', 'Doğru! Işık kırık yolları izleyemez.');
            } else {
                element.classList.add('incorrect');
                showFeedback('incorrect', 'Bu simülasyonda gördüğünüz gibi düz yol gerekiyor.');
            }
        }

        function selectPoints(element, answer) {
            element.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            element.classList.add('selected');
            
            const correctAnswer = obstaclePresent ? 'ab' : 'all';
            if (answer === correctAnswer) {
                element.classList.add('correct');
                showFeedback('correct', 'Doğru! Kaynak her yönde yayılır.');
            } else {
                element.classList.add('incorrect');
                showFeedback('incorrect', 'Kaynak her yönde yayılır; ancak engel araya girerse o yönde ulaşmaz.');
            }
        }

        // Final test
        function selectFinalAnswer(element, answer, questionIndex) {
            element.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            element.classList.add('selected');
            testAnswers[questionIndex] = answer;
        }

        function finishTest() {
            // Test sonuçlarını hesapla
            const correctAnswers = ['B', 'A', 'B', 'A', 'A'];
            let score = 0;
            
            testAnswers.forEach((answer, index) => {
                if (answer === correctAnswers[index]) {
                    score++;
                }
            });
            
            finalScore = score;
            const percentage = (score / 5) * 100;
            
            document.getElementById('test-results').style.display = 'block';
            document.getElementById('score-display').innerHTML = `
                <div style="font-size: 2em; color: #27ae60; margin: 20px 0;">
                    ${score}/5 Doğru (${percentage}%)
                </div>
            `;
            
            const badges = document.getElementById('badges-display');
            if (score >= 4) {
                badges.innerHTML = '<div class="badge gold">Doğrusal Yayılma: Usta</div>';
            } else if (score >= 3) {
                badges.innerHTML = '<div class="badge silver">Doğrusal Yayılma: Temel</div>';
            }
            
            showScreen(10);
        }

        function generateReport() {
            alert('PDF raporu oluşturuluyor...');
            // PDF oluşturma işlemi
        }

        function restartSimulation() {
            currentScreen = 0;
            gameLevel = 1;
            gameScore = 0;
            testAnswers = [];
            finalScore = 0;
            showScreen(0);
        }

        // Geri bildirim gösterme
        function showFeedback(type, message) {
            const feedback = document.querySelector('.feedback:not([style*="display: none"])') || 
                           document.querySelector('.feedback');
            
            if (feedback) {
                feedback.className = `feedback ${type}`;
                feedback.textContent = message;
                feedback.style.display = 'block';
                
                setTimeout(() => {
                    feedback.style.display = 'none';
                }, 3000);
            }
        }

        // Sayfa yüklendiğinde
        document.addEventListener('DOMContentLoaded', function() {
            initDragDrop();
            updateProgress();
        });

        // Modal dışına tıklama
        window.onclick = function(event) {
            const modal = document.getElementById('safety-modal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>
</html>
